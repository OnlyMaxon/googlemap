<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Map ‚Äî All Countries (Simple)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body, html {
            width: 100%;
            height: 100%;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        
        /* Leaflet host container */
        #map {
            width: 100%;
            height: 100%;
        }
        
        .info-panel {
            position: absolute;
            top: 10px;
            left: 10px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            z-index: 1000;
            max-width: 250px;
        }
        
        .info-panel h2 {
            font-size: 16px;
            margin-bottom: 10px;
            color: #333;
        }
        
        .info-panel p {
            font-size: 14px;
            color: #666;
            margin: 5px 0;
        }

        .error-banner {
            position: absolute;
            left: 50%;
            bottom: 16px;
            transform: translateX(-50%);
            background: #ffe8e8;
            color: #b00020;
            border: 1px solid #ffb3b3;
            padding: 8px 12px;
            border-radius: 6px;
            z-index: 1200;
            font-size: 13px;
            display: none;
        }
    </style>
    <!-- Leaflet CSS -->
    <link
        rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""
    />
</head>
<body>
    <div class="info-panel">
        <h2>–ö–∞—Ä—Ç–∞ –º–∏—Ä–∞</h2>
        <p>üó∫Ô∏è –í—Å–µ —Å—Ç—Ä–∞–Ω—ã, –≥—Ä–∞–Ω–∏—Ü—ã –Ω–∞—Ä–∏—Å–æ–≤–∞–Ω—ã</p>
        <p>üîç –ó—É–º: <span id="zoom-level">‚Äî</span></p>
        <p>–ü—Ä–æ–∫—Ä—É—Ç–∫–∞ ‚Äî –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ, –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ ‚Äî –ø–∞–Ω–æ—Ä–∞–º–∞</p>
    </div>
    <div id="map"></div>
    <div class="error-banner" id="error-banner"></div>

    <!-- Leaflet JS -->
    <script
        src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""
    ></script>

    <script>
        // –ò—Å—Ç–æ—á–Ω–∏–∫ –≥—Ä–∞–Ω–∏—Ü —Å—Ç—Ä–∞–Ω (GeoJSON): –æ—Ç–∫—Ä—ã—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∫–ª—é—á–µ–π API
        const COUNTRIES_GEOJSON_URL = 'https://raw.githubusercontent.com/datasets/geo-countries/master/data/countries.geojson';

        // –ë–∞–∑–æ–≤–∞—è –∫–∞—Ä—Ç–∞ (OSM —á–µ—Ä–µ–∑ Leaflet)
        const map = L.map('map', {
            worldCopyJump: true,
            zoomSnap: 0.5,
            zoomDelta: 0.5,
        }).setView([20, 0], 2);

        // –°–ª–æ–∏ —Ç–∞–π–ª–æ–≤ OSM
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑—É–º–∞
        const zoomLabel = document.getElementById('zoom-level');
        function updateZoomLabel() {
            zoomLabel.textContent = map.getZoom().toFixed(1) + 'x';
        }
        map.on('zoomend', updateZoomLabel);
        updateZoomLabel();

        // –°—Ç–∏–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
        const defaultStyle = {
            color: '#1e88e5',
            weight: 1.5,
            opacity: 1,
            fillColor: '#bbdefb',
            fillOpacity: 0.35
        };
        const highlightStyle = {
            weight: 2.5,
            color: '#0d47a1',
            fillColor: '#90caf9',
            fillOpacity: 0.55
        };

        let countriesLayer;

        function getCountryName(props) {
            return (
                props?.ADMIN ||
                props?.NAME ||
                props?.name ||
                props?.ADMIN_NAME ||
                props?.COUNTRY ||
                '–°—Ç—Ä–∞–Ω–∞'
            );
        }

        function onEachFeature(feature, layer) {
            const name = getCountryName(feature.properties || {});
            layer.bindTooltip(name, { sticky: true, direction: 'center', className: 'country-label' });
            layer.on({
                mouseover: (e) => e.target.setStyle(highlightStyle),
                mouseout: (e) => {
                    countriesLayer.resetStyle(e.target);
                },
                click: (e) => {
                    map.fitBounds(e.target.getBounds(), { padding: [20, 20] });
                }
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ GeoJSON —Å—Ç—Ä–∞–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç—É
        fetch(COUNTRIES_GEOJSON_URL)
            .then((res) => {
                if (!res.ok) throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –≥—Ä–∞–Ω–∏—Ü—ã —Å—Ç—Ä–∞–Ω');
                return res.json();
            })
            .then((geojson) => {
                countriesLayer = L.geoJSON(geojson, {
                    style: () => defaultStyle,
                    onEachFeature,
                }).addTo(map);

                // –ü–æ–∫–∞–∑–∞—Ç—å –≤–µ—Å—å –º–∏—Ä (–ø–æ –≥—Ä–∞–Ω–∏—Ü–∞–º —Å–ª–æ—è)
                try {
                    map.fitBounds(countriesLayer.getBounds(), { padding: [20, 20] });
                } catch (_) {
                    // –ù–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ —Å–ª–æ–π –ø—É—Å—Ç–æ–π ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –≤–∏–¥
                }
            })
            .catch((err) => {
                const banner = document.getElementById('error-banner');
                banner.textContent = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≥—Ä–∞–Ω–∏—Ü —Å—Ç—Ä–∞–Ω: ' + err.message;
                banner.style.display = 'block';
            });
    </script>
</body>
</html>
